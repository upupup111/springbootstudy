{"version":3,"sources":["webpack:///./src/assets/suolong.jpg","webpack:///src/views/admin/importBicycle.vue","webpack:///./src/views/admin/importBicycle.vue?aaf5","webpack:///./src/views/admin/importBicycle.vue"],"names":["module","exports","__webpack_require__","p","importBicycle","props","data","addDialog","showReview","loading","listData","pageInfo","importing","previewFile","previewList","created","this","userId","$store","state","user","accessToken","id","managerId","$route","query","manager","title","name","watch","val","currentItem","methods","onFileSelected","e","file","target","files","console","log","uploadFile","form","FormData","vm","append","config","timeout","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","uploadProgress","axios","post","then","it","$refs","fileInput","value","catch","Object","element_ui_common","message","type","duration","importData","code","msg","computed","statusList","tableData","tableHeader","key","admin_importBicycle","render","_vm","_h","$createElement","_c","_self","_m","_v","staticStyle","height","ref","attrs","accept","hidden","on","change","click","$event","_s","_e","slot","length","width","align","prop","label","staticRenderFns","src","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.0114a608061578e31b52.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/suolong.98d5401.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/suolong.jpg\n// module id = PZEo\n// module chunks = 1","<template>\r\n  <div>\r\n    <div id=\"app\"><img src=\"@/assets/suolong.jpg\" width=\"20%\"></div>\r\n    <div>导入说明：</div>\r\n    <div>1.单表的数据大小越小越好，2000条内为佳。</div>\r\n    <div>2.2000条数据导入时间大概为1分半左右。</div>\r\n    <!-- <div>3.导入后单位的二维码生成有延迟，大概10分钟左右，视每次导入的数据量大小。</div> -->\r\n    <div>3.每次导入的数据会按照单车编号去重。</div>\r\n    <div>4.相同单车编号的数据，以最后导入的数据为准。</div>\r\n    <div style=\"height:1rem;\"></div>\r\n    <input\r\n      name=\"file\"\r\n      type=\"file\"\r\n      accept=\".xls, .xlsx\"\r\n      ref=\"fileInput\"\r\n      @change=\"onFileSelected\"\r\n      hidden\r\n    >\r\n\r\n    <el-button @click=\"$refs.fileInput.click()\">点击选择 Excel 文件 {{ previewFile && previewFile.name}}</el-button>\r\n    \r\n    <el-button type=\"primary\" v-if=\"previewFile\" @click=\"uploadFile\" :loading=\"loading\">提交预览</el-button>\r\n    <div slot=\"filters\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"importData\"\r\n          v-if=\"previewList && previewList.length\"\r\n          :loading=\"importing\"\r\n        >确认导入以下{{previewList.length}}条数据</el-button>\r\n      </div>\r\n    <!-- <List\r\n      :header=\"tableHeader\"\r\n      :data=\"tableData\"\r\n      :title=\"title\"\r\n      :disableAction=\"true\"\r\n      v-if=\"previewList && previewList.length\"\r\n    > -->\r\n         <el-table v-if=\"previewList && previewList.length\" :data=\"previewList\" style=\"width: 100%;\" align=\"center\">\r\n            <el-table-column prop=\"bicycleNo\" label=\"编号\" width=\"200\" align=\"center\"/>\r\n            <el-table-column prop=\"color\" label=\"颜色\" width=\"200\" align=\"center\"/>\r\n        </el-table>\r\n      \r\n    <!-- </List> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Message } from \"element-ui\";\r\nimport qs from \"qs\";\r\nexport default {\r\n  props: [\"type\"],\r\n  data() {\r\n    return {\r\n      addDialog: false,\r\n      showReview: false,\r\n      loading: false,\r\n      listData: [],\r\n      pageInfo: {},\r\n      importing: false,\r\n      previewFile: null,\r\n      previewList: []\r\n    };\r\n  },\r\n  created() {\r\n    this.userId = this.$store.state.user.accessToken.id;\r\n    this.managerId = this.$route.query.manager;\r\n    this.title = this.$route.query.name;\r\n  },\r\n  watch: {\r\n    addDialog(val) {\r\n      if (!val) {\r\n        this.currentItem = {};\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onFileSelected(e) {\r\n      let file = e.target.files[0];\r\n      if (!file) {\r\n        return;\r\n      }\r\n      this.previewFile = file;\r\n      console.log(file);\r\n    },\r\n    uploadFile() {\r\n      let form = new FormData();\r\n      let vm = this;\r\n      form.append(\"file\", this.previewFile);\r\n      form.append(\"id\",this.userId)\r\n      const config = {\r\n        timeout:0,\r\n        onUploadProgress: function(progressEvent) {\r\n          var percentCompleted = Math.round(\r\n            (progressEvent.loaded * 100) / progressEvent.total\r\n          );\r\n          vm.uploadProgress = percentCompleted;\r\n        }\r\n      };\r\n      this.loading = true;\r\n      this.axios.post(\"bicycle/import/preview\", form,config)\r\n        .then(it => {\r\n          vm.loading = false;\r\n          vm.$refs.fileInput.value = \"\";\r\n          vm.previewFile = null;\r\n          vm.previewList = it.data.data;\r\n        //   console.log(\"it: \",it);\r\n        })\r\n        .catch(it => {\r\n          vm.loading = false;\r\n          Message({\r\n            message: it,\r\n            type: \"success\",\r\n            duration: 1 * 1000\r\n          });\r\n        });\r\n    },\r\n    importData() {\r\n      let vm = this;\r\n      vm.importing = true;\r\n      this.axios.post(\"bicycle/import\",vm.previewList, { timeout: 0 })  \r\n        .then(it => {\r\n            // console.log(\"it\",it);\r\n        vm.importing = false;\r\n        vm.previewList = [];\r\n        if(it.data.code===200){\r\n            let msg = \"导入\"+it.data.data+\"条数据成功\"\r\n            Message({\r\n                message: msg,\r\n                type: \"success\",\r\n                duration: 2 * 1000\r\n            });\r\n        }else{\r\n             Message({\r\n                message: it.data.message,\r\n                type: \"info\",\r\n                duration: 2 * 1000\r\n            });\r\n        }\r\n        })\r\n        .catch(it => {\r\n          vm.importing = false;\r\n          Message({\r\n            message: it,\r\n            type: \"success\",\r\n            duration: 1 * 1000\r\n          });\r\n        });\r\n    }\r\n  },\r\n  computed: {\r\n    statusList() {},\r\n    tableData() {\r\n      return this.previewList;\r\n    },\r\n    tableHeader() {\r\n      return [\r\n        {\r\n          key: \"bicycleNo\",\r\n          name: \"编号\"\r\n        },\r\n        {\r\n          key: \"color\",\r\n          name: \"颜色\"\r\n        }\r\n      ];\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.detail-table {\r\n  border-collapse: collapse;\r\n}\r\n.detail-table,\r\n.detail-table td,\r\n.detail-table th,\r\n.detail-table tr {\r\n  border: solid 1px lightgrey;\r\n}\r\n\r\n.detail-table img {\r\n  max-width: 10em;\r\n  height: auto;\r\n}\r\n.detail-table .title {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  font-size: 16px;\r\n  padding-right: 10px;\r\n  font-weight: bolder;\r\n}\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/importBicycle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',[_vm._v(\"导入说明：\")]),_vm._v(\" \"),_c('div',[_vm._v(\"1.单表的数据大小越小越好，2000条内为佳。\")]),_vm._v(\" \"),_c('div',[_vm._v(\"2.2000条数据导入时间大概为1分半左右。\")]),_vm._v(\" \"),_c('div',[_vm._v(\"3.每次导入的数据会按照单车编号去重。\")]),_vm._v(\" \"),_c('div',[_vm._v(\"4.相同单车编号的数据，以最后导入的数据为准。\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"1rem\"}}),_vm._v(\" \"),_c('input',{ref:\"fileInput\",attrs:{\"name\":\"file\",\"type\":\"file\",\"accept\":\".xls, .xlsx\",\"hidden\":\"\"},on:{\"change\":_vm.onFileSelected}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.$refs.fileInput.click()}}},[_vm._v(\"点击选择 Excel 文件 \"+_vm._s(_vm.previewFile && _vm.previewFile.name))]),_vm._v(\" \"),(_vm.previewFile)?_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.uploadFile}},[_vm._v(\"提交预览\")]):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"filters\"},slot:\"filters\"},[(_vm.previewList && _vm.previewList.length)?_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.importing},on:{\"click\":_vm.importData}},[_vm._v(\"确认导入以下\"+_vm._s(_vm.previewList.length)+\"条数据\")]):_vm._e()],1),_vm._v(\" \"),(_vm.previewList && _vm.previewList.length)?_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.previewList,\"align\":\"center\"}},[_c('el-table-column',{attrs:{\"prop\":\"bicycleNo\",\"label\":\"编号\",\"width\":\"200\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"color\",\"label\":\"颜色\",\"width\":\"200\",\"align\":\"center\"}})],1):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/suolong.jpg\"),\"width\":\"20%\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6dfdc425\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/importBicycle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6dfdc425\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./importBicycle.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./importBicycle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./importBicycle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6dfdc425\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./importBicycle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6dfdc425\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/importBicycle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}