webpackJsonp([1],{PZEo:function(e,t,i){e.exports=i.p+"static/img/suolong.98d5401.jpg"},ehxr:function(e,t){},uWcE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("TcQY"),n=(i("atmG"),{props:["type"],data:function(){return{addDialog:!1,showReview:!1,loading:!1,listData:[],pageInfo:{},importing:!1,previewFile:null,previewList:[]}},created:function(){this.userId=this.$store.state.user.accessToken.id,this.managerId=this.$route.query.manager,this.title=this.$route.query.name},watch:{addDialog:function(e){e||(this.currentItem={})}},methods:{onFileSelected:function(e){var t=e.target.files[0];t&&(this.previewFile=t,console.log(t))},uploadFile:function(){var e=new FormData,t=this;e.append("file",this.previewFile),e.append("id",this.userId);var i={timeout:0,onUploadProgress:function(e){var i=Math.round(100*e.loaded/e.total);t.uploadProgress=i}};this.loading=!0,this.axios.post("bicycle/import/preview",e,i).then(function(e){t.loading=!1,t.$refs.fileInput.value="",t.previewFile=null,t.previewList=e.data.data}).catch(function(e){t.loading=!1,Object(a.Message)({message:e,type:"success",duration:1e3})})},importData:function(){var e=this;e.importing=!0,this.axios.post("bicycle/import",e.previewList,{timeout:0}).then(function(t){if(e.importing=!1,e.previewList=[],200===t.data.code){var i="导入"+t.data.data+"条数据成功";Object(a.Message)({message:i,type:"success",duration:2e3})}else Object(a.Message)({message:t.data.message,type:"info",duration:2e3})}).catch(function(t){e.importing=!1,Object(a.Message)({message:t,type:"success",duration:1e3})})}},computed:{statusList:function(){},tableData:function(){return this.previewList},tableHeader:function(){return[{key:"bicycleNo",name:"编号"},{key:"color",name:"颜色"}]}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),e._v(" "),i("div",[e._v("导入说明：")]),e._v(" "),i("div",[e._v("1.单表的数据大小越小越好，2000条内为佳。")]),e._v(" "),i("div",[e._v("2.2000条数据导入时间大概为1分半左右。")]),e._v(" "),i("div",[e._v("3.每次导入的数据会按照单车编号去重。")]),e._v(" "),i("div",[e._v("4.相同单车编号的数据，以最后导入的数据为准。")]),e._v(" "),i("div",{staticStyle:{height:"1rem"}}),e._v(" "),i("input",{ref:"fileInput",attrs:{name:"file",type:"file",accept:".xls, .xlsx",hidden:""},on:{change:e.onFileSelected}}),e._v(" "),i("el-button",{on:{click:function(t){return e.$refs.fileInput.click()}}},[e._v("点击选择 Excel 文件 "+e._s(e.previewFile&&e.previewFile.name))]),e._v(" "),e.previewFile?i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.uploadFile}},[e._v("提交预览")]):e._e(),e._v(" "),i("div",{attrs:{slot:"filters"},slot:"filters"},[e.previewList&&e.previewList.length?i("el-button",{attrs:{type:"primary",loading:e.importing},on:{click:e.importData}},[e._v("确认导入以下"+e._s(e.previewList.length)+"条数据")]):e._e()],1),e._v(" "),e.previewList&&e.previewList.length?i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.previewList,align:"center"}},[i("el-table-column",{attrs:{prop:"bicycleNo",label:"编号",width:"200",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"color",label:"颜色",width:"200",align:"center"}})],1):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("img",{attrs:{src:i("PZEo"),width:"20%"}})])}]};var s=i("C7Lr")(n,r,!1,function(e){i("ehxr")},"data-v-6dfdc425",null);t.default=s.exports}});
//# sourceMappingURL=1.0114a608061578e31b52.js.map